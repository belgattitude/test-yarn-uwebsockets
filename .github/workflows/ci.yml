name: CI-examples

on:
  push:
    branches:
      - main
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]
    branches:
      - '**'
    paths-ignore:
      - 'docs/**'

permissions:
  contents: read

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18.x]
    steps:
      - uses: actions/checkout@v3

      - name: ‚öôÔ∏è Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}

      - name: üì• Monorepo install
        uses: ./.github/actions/yarn-nm-install


      - name: ‚öôÔ∏è Expose yarn config as "$GITHUB_OUTPUT"
        id: yarn-config
        working-directory: ${{ inputs.cwd }}
        run: |
          echo "CACHE_FOLDER=$(yarn config get cacheFolder)" >> $GITHUB_OUTPUT
          echo "GLOBAL_CACHE_FOLDER=$(yarn config get globalFolder)" >> $GITHUB_OUTPUT

      - name: ‚öôÔ∏è List global cache
        run: ls -la ${{ steps.yarn-config.outputs.GLOBAL_CACHE_FOLDER }}

      - name: ‚öôÔ∏è List local cache
        run: ls -la ${{ steps.yarn-config.outputs.CACHE_FOLDER }}
